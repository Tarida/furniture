(function(t){function e(e){for(var s,i,a=e[0],c=e[1],u=e[2],d=0,m=[];d<a.length;d++)i=a[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&m.push(r[i][0]),r[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);l&&l(e);while(m.length)m.shift()();return n.push.apply(n,u||[]),o()}function o(){for(var t,e=0;e<n.length;e++){for(var o=n[e],s=!0,a=1;a<o.length;a++){var c=o[a];0!==r[c]&&(s=!1)}s&&(n.splice(e--,1),t=i(i.s=o[0]))}return t}var s={},r={app:0},n=[];function i(e){if(s[e])return s[e].exports;var o=s[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=s,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(o,s,function(e){return t[e]}.bind(null,s));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var l=c;n.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},1543:function(t,e,o){"use strict";o.r(e),o.d(e,"db",(function(){return i})),o.d(e,"auth",(function(){return a})),o.d(e,"currentUser",(function(){return c})),o.d(e,"usersCollection",(function(){return u})),o.d(e,"postsCollection",(function(){return l})),o.d(e,"commentsCollection",(function(){return d})),o.d(e,"likesCollection",(function(){return m}));var s=o("8aa5"),r=o.n(s),n=(o("e71f"),{apiKey:"AIzaSyBvzxMZCb2ICHqFBTbXMtLcyHTmhD-Vg68",authDomain:"gjfurniturejpr.firebaseapp.com",databaseURL:"https://gjfurniturejpr.firebaseio.com",projectId:"gjfurniturejpr",storageBucket:"gjfurniturejpr.appspot.com",messagingSenderId:"882974853907"});r.a.initializeApp(n);var i=r.a.firestore(),a=r.a.auth(),c=a.currentUser,u=i.collection("users"),l=i.collection("posts"),d=i.collection("comments"),m=i.collection("likes")},"56d7":function(t,e,o){"use strict";o.r(e);o("e260"),o("e6cf"),o("cca6"),o("a79d");var s=o("2b0e"),r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[t.currentUser?o("Navigation"):t._e(),o("router-view")],1)},n=[],i=o("5530"),a=o("2f62"),c=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("header",[o("section",[o("div",{staticClass:"col1"},[o("router-link",{attrs:{to:"dashboard"}},[o("h3",[t._v("Vuegram")])]),o("ul",{staticClass:"inline"},[o("li",[o("router-link",{attrs:{to:"dashboard"}},[t._v("Dashboard")])],1),o("li",[o("router-link",{attrs:{to:"settings"}},[t._v("Settings")])],1),o("li",[o("a",{on:{click:t.logout}},[t._v("logout")])])])],1)])])},u=[],l=o("1543"),d={methods:{logout:function(){var t=this;l.auth.signOut().then((function(){t.$store.dispatch("clearData"),t.$router.push("/login")})).catch((function(t){console.log(t)}))}}},m=d,p=o("2877"),f=Object(p["a"])(m,c,u,!1,null,null,null),g=f.exports,h={components:{Navigation:g},computed:Object(i["a"])({},Object(a["b"])(["currentUser"]))},v=h,w=Object(p["a"])(v,r,n,!1,null,null,null),b=w.exports,_=(o("45fc"),o("8c4f")),P=o("8aa5"),F=o.n(P),C=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"login"}},[o("transition",{attrs:{name:"fade"}},[t.performingRequest?o("div",{staticClass:"loading"},[o("p",[t._v("Loading...")])]):t._e()]),o("section",[t._m(0),o("div",{staticClass:"col2",class:{"signup-form":!t.showLoginForm&&!t.showForgotPassword}},[t.showLoginForm?o("form",{on:{submit:function(t){t.preventDefault()}}},[o("h1",[t._v("Welcome Back")]),o("label",{attrs:{for:"email1"}},[t._v("Email")]),o("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.loginForm.email,expression:"loginForm.email",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"you@email.com",id:"email1"},domProps:{value:t.loginForm.email},on:{input:function(e){e.target.composing||t.$set(t.loginForm,"email",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),o("label",{attrs:{for:"password1"}},[t._v("Password")]),o("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.loginForm.password,expression:"loginForm.password",modifiers:{trim:!0}}],attrs:{type:"password",placeholder:"******",id:"password1"},domProps:{value:t.loginForm.password},on:{input:function(e){e.target.composing||t.$set(t.loginForm,"password",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),o("button",{staticClass:"button",on:{click:t.login}},[t._v("Log In")]),o("div",{staticClass:"extras"},[o("a",{on:{click:t.togglePasswordReset}},[t._v("Forgot Password")]),o("a",{on:{click:t.toggleForm}},[t._v("Create an Account")])])]):t._e(),t.showLoginForm||t.showForgotPassword?t._e():o("form",{on:{submit:function(t){t.preventDefault()}}},[o("h1",[t._v("Get Started")]),o("label",{attrs:{for:"name"}},[t._v("Name")]),o("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.signupForm.name,expression:"signupForm.name",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"Savvy Apps",id:"name"},domProps:{value:t.signupForm.name},on:{input:function(e){e.target.composing||t.$set(t.signupForm,"name",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),o("label",{attrs:{for:"title"}},[t._v("Title")]),o("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.signupForm.title,expression:"signupForm.title",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"Company",id:"title"},domProps:{value:t.signupForm.title},on:{input:function(e){e.target.composing||t.$set(t.signupForm,"title",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),o("label",{attrs:{for:"email2"}},[t._v("Email")]),o("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.signupForm.email,expression:"signupForm.email",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"you@email.com",id:"email2"},domProps:{value:t.signupForm.email},on:{input:function(e){e.target.composing||t.$set(t.signupForm,"email",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),o("label",{attrs:{for:"password2"}},[t._v("Password")]),o("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.signupForm.password,expression:"signupForm.password",modifiers:{trim:!0}}],attrs:{type:"password",placeholder:"min 6 characters",id:"password2"},domProps:{value:t.signupForm.password},on:{input:function(e){e.target.composing||t.$set(t.signupForm,"password",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),o("button",{staticClass:"button",on:{click:t.signup}},[t._v("Sign Up")]),o("div",{staticClass:"extras"},[o("a",{on:{click:t.toggleForm}},[t._v("Back to Log In")])])]),t.showForgotPassword?o("form",{staticClass:"password-reset",on:{submit:function(t){t.preventDefault()}}},[t.passwordResetSuccess?o("div",[o("h1",[t._v("Email Sent")]),o("p",[t._v("check your email for a link to reset your password")]),o("button",{staticClass:"button",on:{click:t.togglePasswordReset}},[t._v("Back to login")])]):o("div",[o("h1",[t._v("Reset Password")]),o("p",[t._v("We will send you an email to reset your password")]),o("label",{attrs:{for:"email3"}},[t._v("Email")]),o("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.passwordForm.email,expression:"passwordForm.email",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"you@email.com",id:"email3"},domProps:{value:t.passwordForm.email},on:{input:function(e){e.target.composing||t.$set(t.passwordForm,"email",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),o("button",{staticClass:"button",on:{click:t.resetPassword}},[t._v("Submit")]),o("div",{staticClass:"extras"},[o("a",{on:{click:t.togglePasswordReset}},[t._v("Back to Log In")])])])]):t._e(),o("transition",{attrs:{name:"fade"}},[""!==t.errorMsg?o("div",{staticClass:"error-msg"},[o("p",[t._v(t._s(t.errorMsg))])]):t._e()])],1)])],1)},y=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"col1"},[o("h1",[t._v("Vuegram")]),o("p",[t._v("Welcome to the "),o("a",{attrs:{href:"https://savvyapps.com/",target:"_blank"}},[t._v("Savvy Apps")]),t._v(" sample social media web app powered by Vue.js and Firebase. Build this project by checking out The Definitive Guide to Getting Started with Vue.js")])])}],k=(o("b0c0"),o("d3b7"),o("1543")),U={data:function(){return{loginForm:{email:"",password:""},signupForm:{name:"",title:"",email:"",password:""},passwordForm:{email:""},showLoginForm:!0,showForgotPassword:!1,passwordResetSuccess:!1,performingRequest:!1,errorMsg:""}},methods:{toggleForm:function(){this.errorMsg="",this.showLoginForm=!this.showLoginForm},togglePasswordReset:function(){this.showForgotPassword?(this.showLoginForm=!0,this.showForgotPassword=!1,this.passwordResetSuccess=!1):(this.showLoginForm=!1,this.showForgotPassword=!0)},login:function(){var t=this;this.performingRequest=!0,k.auth.signInWithEmailAndPassword(this.loginForm.email,this.loginForm.password).then((function(e){t.$store.commit("setCurrentUser",e.user),t.$store.dispatch("fetchUserProfile"),t.$router.push("/dashboard")})).catch((function(e){console.log(e),t.performingRequest=!1,t.errorMsg=e.message}))},signup:function(){var t=this;this.performingRequest=!0;var e=new Promise((function(e,o){k.auth.createUserWithEmailAndPassword(t.signupForm.email,t.signupForm.password).then((function(t){e(t)})).catch((function(t){o(t)}))}));e.then((function(e){console.log("Running firestore"),t.$store.commit("setCurrentUser",e.user),k.usersCollection.doc(e.user.uid).set({name:t.signupForm.name,title:t.signupForm.title}).then((function(){t.$store.dispatch("fetchUserProfile"),t.performingRequest=!1,t.$router.push("/dashboard")})).catch((function(e){console.log(e),t.performingRequest=!1,t.errorMsg=e.message}))})).catch((function(e){console.log(e),t.performingRequest=!1,t.errorMsg=e.message}))},resetPassword:function(){var t=this;this.performingRequest=!0,k.auth.sendPasswordResetEmail(this.passwordForm.email).then((function(){t.performingRequest=!1,t.passwordResetSuccess=!0,t.passwordForm.email=""})).catch((function(e){console.log(e),t.performingRequest=!1,t.errorMsg=e.message}))}}},j=U,$=Object(p["a"])(j,C,y,!1,null,null,null),x=$.exports,S=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"dashboard"}},[o("section",[o("div",{staticClass:"col1"},[o("div",{staticClass:"profile"},[o("h5",[t._v(t._s(t.userProfile.name))]),o("p",[t._v(t._s(t.userProfile.title))]),o("div",{staticClass:"create-post"},[o("p",[t._v("create a post")]),o("form",{on:{submit:function(t){t.preventDefault()}}},[o("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.post.content,expression:"post.content",modifiers:{trim:!0}}],domProps:{value:t.post.content},on:{input:function(e){e.target.composing||t.$set(t.post,"content",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),o("button",{staticClass:"button",attrs:{disabled:""==t.post.content},on:{click:t.createPost}},[t._v("post")])])])])]),o("div",{staticClass:"col2"},[o("transition",{attrs:{name:"fade"}},[t.hiddenPosts.length?o("div",{staticClass:"hidden-posts",on:{click:t.showNewPosts}},[o("p",[t._v(" Click to show "),o("span",{staticClass:"new-posts"},[t._v(t._s(t.hiddenPosts.length))]),t._v(" new "),t.hiddenPosts.length>1?o("span",[t._v("posts")]):o("span",[t._v("post")])])]):t._e()]),t.posts.length?o("div",t._l(t.posts,(function(e){return o("div",{key:e.id,staticClass:"post"},[o("h5",[t._v(t._s(e.userName))]),o("span",[t._v(t._s(t._f("formatDate")(e.createdOn)))]),o("p",[t._v(t._s(t._f("trimLength")(e.content)))]),o("ul",[o("li",[o("a",{on:{click:function(o){return t.openCommentModal(e)}}},[t._v("comments "+t._s(e.comments))])]),o("li",[o("a",{on:{click:function(o){return t.likePost(e.id,e.likes)}}},[t._v("likes "+t._s(e.likes))])]),o("li",[o("a",{on:{click:function(o){return t.viewPost(e)}}},[t._v("view full post")])])])])})),0):o("div",[o("p",{staticClass:"no-results"},[t._v("There are currently no posts")])])],1)])])},O=[],R=o("1543"),E={data:function(){return{post:{content:""}}},computed:Object(i["a"])({},Object(a["b"])(["userProfile","currentUser","posts"])),methods:{createPost:function(){var t=this;R.postsCollection.add({createdOn:new Date,content:this.post.content,userId:this.currentUser.uid,userName:this.userProfile.name,comments:0,likes:0}).then((function(e){t.post.content=""})).catch((function(t){console.log(t)}))}}},L=E,N=Object(p["a"])(L,S,O,!1,null,null,null),q=N.exports,M=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div")},D=[],A={},I=A,B=Object(p["a"])(I,M,D,!1,null,null,null),T=B.exports;s["a"].use(_["a"]);var H=new _["a"]({mode:"history",base:"/",routes:[{path:"*",redirect:"/dashboard"},{path:"/login",name:"Login",component:x},{path:"/dashboard",name:"Dashboard",component:q,meta:{requiresAuth:!0}},{path:"/settings",name:"Settings",component:T,meta:{requiresAuth:!0}}]});H.beforeEach((function(t,e,o){var s=t.matched.some((function(t){return t.meta.requiresAuth})),r=F.a.auth().currentUser;s&&!r?o("/login"):o()}));var V=H,W=(o("4160"),o("159b"),o("1543"));s["a"].use(a["a"]),W.auth.onAuthStateChanged((function(t){t&&(G.commit("setCurrentUser",t),G.dispatch("fetchUserProfile"),W.usersCollection.doc(t.uid).onSnapshot((function(t){G.commit("setUserProfile",t.data())})),W.postsCollection.orderBy("createdOn","desc").onSnapshot((function(t){var e;if(t.docs.length&&(e=G.state.currentUser.uid==t.docChanges[0].doc.data().userId),t.docChanges.length===t.docs.length||"added"!=t.docChanges[0].type||e){var o=[];t.forEach((function(t){var e=t.data();e.id=t.id,o.push(e)})),G.commit("setPosts",o)}else{var s=t.docChanges[0].doc.data();s.id=t.docChanges[0].doc.id,G.commit("setHiddenPosts",s)}})))}));var z,G=new a["a"].Store({state:{currentUser:null,userProfile:{},posts:[],hiddenPosts:[]},actions:{clearData:function(t){var e=t.commit;e("setCurrentUser",null),e("setUserProfile",{}),e("setPosts",null),e("setHiddenPosts",null)},fetchUserProfile:function(t){var e=t.commit,o=t.state;W.usersCollection.doc(o.currentUser.uid).get().then((function(t){e("setUserProfile",t.data())})).catch((function(t){console.log(t)}))},updateProfile:function(t,e){t.commit;var o=t.state,s=e.name,r=e.title;W.usersCollection.doc(o.currentUser.uid).update({name:s,title:r}).then((function(t){W.postsCollection.where("userId","==",o.currentUser.uid).get().then((function(t){t.forEach((function(t){W.postsCollection.doc(t.id).update({userName:s})}))})),W.commentsCollection.where("userId","==",o.currentUser.uid).get().then((function(t){t.forEach((function(t){W.commentsCollection.doc(t.id).update({userName:s})}))}))})).catch((function(t){console.log(t)}))}},mutations:{setCurrentUser:function(t,e){t.currentUser=e},setUserProfile:function(t,e){t.userProfile=e},setPosts:function(t,e){t.posts=e||[]},setHiddenPosts:function(t,e){e?t.hiddenPosts.some((function(t){return t.id===e.id}))||t.hiddenPosts.unshift(e):t.hiddenPosts=[]}}}),J=(o("7e7d"),o("1543"));s["a"].config.productionTip=!1,J.auth.onAuthStateChanged((function(t){z||(z=new s["a"]({el:"#app",router:V,store:G,render:function(t){return t(b)}}))}))},"7e7d":function(t,e,o){}});
//# sourceMappingURL=app.de1f9d3d.js.map